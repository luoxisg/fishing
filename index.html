<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hook & Cook Interactive Fishing Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Chosen Palette: Game-inspired (Darker, vibrant, high contrast) */
        /* Application Structure Plan: A single-page application with a fixed bottom navigation bar for mobile and a top navigation for desktop. The content is divided into four thematic sections: 1. Home (now with Meet the Fish at the very top) - A welcoming introduction with interactive fish gallery and chart. 2. The Science of Fishing - Accordion-style sections for fish senses and an interactive bait recommender. 3. Quiz - An interactive multiple-choice quiz. 4. Pro Tips - Accordion-style practical advice. This structure is chosen to transform a linear document into an exploratory, engaging experience, guiding the user from basic concepts to advanced knowledge in a non-linear way, which is more suitable for a web application and a younger audience, with a strong focus on one-hand mobile operation. */
        /* Visualization & Content Choices:
            - Home (now includes Meet the Fish): Goal: Inform/Engage/Compare. Method: Textual introduction, HTML/CSS cards for each fish. Interaction: Clicking cards reveals detailed modal pop-ups. Justification: Consolidates key introductory and exploratory content for immediate engagement.
            - The Science of Fishing: Goal: Explain/Organize. Method: Accordion-style collapsible sections for Vision, Chemoreception, and Lateral Line. An interactive HTML/JS 'Bait Recommender' tool. Interaction: Users click accordion headers to expand/collapse content. Users select a fish to get bait recommendations. Justification: Accordions improve mobile usability by reducing vertical scroll and allowing focused content consumption.
            - Pro Tips: Goal: Inform/Organize. Method: Accordion-style HTML/CSS lists for checklists and best practices. Interaction: Clicking to expand/collapse sections. Justification: Accordions are excellent for presenting lists of information in a compact way.
            - Quiz: Goal: Assess/Engage. Method: Multiple-choice questions with HTML/CSS and Vanilla JS for logic. Interaction: Users select answers (with visual feedback), get immediate feedback, and a final score (with correct/incorrect indicators). Justification: Reinforces learning and provides an engaging way to test understanding with clear visual cues.
            - Library/Method: Tailwind CSS for responsive layout and styling, Chart.js (still included for potential future use, but not actively used for radar chart), and Vanilla JavaScript for all interactions (navigation, modals, accordions, recommender, quiz). */
        /* CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. */

        :root {
            --bg-main: #0A0A1A; /* 更深的深蓝/紫色，接近纯黑 */
            --bg-secondary: #1A2A3A; /* 深灰蓝，作为模块背景 */
            --text-primary: #F5F5F5; /* 亮白色，高对比度主文本 */
            --text-secondary: #A0A0A0; /* 柔和的灰色，辅助文本 */
            --accent: #FF4500; /* 鲜艳的橙红色，强调色 */
            --accent-dark: #CC3700; /* 更深的橙红色 */
            --highlight: #FFD700; /* 金色，突出显示 */
            --border-color: #3A3A4A; /* 模块边框颜色 */
            --hover-bg: #2A3A4A; /* 悬停背景色 */

            /* New variables for light backgrounds */
            --text-primary-dark: #2C3E50; /* Dark blue-grey for light backgrounds */
            --text-secondary-dark: #5D6D7E; /* Medium grey-blue for light backgrounds */
            --border-color-light: #D1D5DB; /* Light grey border for light backgrounds */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            padding-bottom: 60px; /* Space for fixed bottom nav on mobile */
        }
        @media (min-width: 768px) {
            body {
                padding-bottom: 0; /* No padding on desktop */
            }
        }

        .nav-link {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            background-color: var(--bg-secondary);
            border-left-color: var(--accent-dark);
            color: var(--text-primary);
        }
        .card {
            background-color: var(--bg-secondary); /* Cards now use secondary background */
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease; /* Added background-color for smooth transition */
            border-radius: 8px; /* Slightly rounded corners for blocky feel */
            color: var(--text-primary); /* Ensure text color is primary */
            border: 1px solid var(--border-color); /* Added border */
        }
        .card:hover {
            transform: translateY(-5px) scale(1.02); /* Slight scale up on hover */
            box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.4), 0 6px 10px -3px rgba(0, 0, 0, 0.3); /* Darker, more pronounced shadows */
            background-color: var(--hover-bg); /* Darker secondary on hover */
        }
        .tab.active {
            border-bottom-color: var(--accent-dark);
            background-color: var(--bg-secondary);
        }
        /* Accordion-style tabs for Science section */
        .science-accordion-item {
            border-radius: 8px;
            overflow: hidden; /* Ensures content doesn't spill out during transition */
        }
        .science-accordion-header {
            @apply w-full text-left p-4 flex justify-between items-center font-medium text-lg rounded-md;
            background-color: var(--bg-secondary); /* Use secondary background */
            color: var(--text-primary); /* Ensure text color is primary */
            transition: background-color 0.3s ease;
            border: 1px solid var(--border-color); /* Added border */
            border-radius: 8px; /* Apply border-radius to header */
        }
        .science-accordion-header:hover {
            background-color: var(--hover-bg); /* Slightly lighter secondary on hover */
        }
        .science-accordion-header.active {
            background-color: var(--accent);
            color: white;
            border-color: var(--accent);
            border-radius: 8px 8px 0 0; /* Rounded top, sharp bottom when active */
        }
        .science-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
            background-color: var(--bg-secondary); /* Content uses secondary background */
            color: var(--text-secondary); /* Content text is secondary */
            padding: 0 1rem; /* Adjust padding for collapsed state */
            border-left: 1px solid var(--border-color);
            border-right: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px; /* Rounded bottom only */
        }
        .science-accordion-content.expanded {
            max-height: 9999px; /* Allow content to fully expand */
            overflow-y: auto; /* Enable scrolling within the accordion if content is too long */
            padding: 1rem; /* Padding for expanded state */
        }


        .accordion-content { /* General accordion for Pro Tips */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
            background-color: var(--bg-secondary); /* Content uses secondary background */
            color: var(--text-secondary); /* Content text is secondary */
            border-left: 1px solid var(--border-color);
            border-right: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px;
        }
        .accordion-content.expanded { /* Added expanded class for general accordion */
            max-height: 9999px; /* Allow content to fully expand */
            overflow-y: auto; /* Enable scrolling within the accordion if content is too long */
            padding: 1rem; /* Padding for expanded state */
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
            background-color: var(--bg-secondary); /* Modal uses secondary background */
            color: var(--text-primary); /* Modal text is primary */
            border: 1px solid var(--border-color);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 550px; /* Adjusted max-width for better fit */
            margin-left: auto;
            margin-right: auto;
            height: auto; /* Let aspect ratio control height */
            aspect-ratio: 1 / 1; /* Make it square for a nice radar chart */
        }
        @media (min-width: 768px) {
            .chart-container {
                max-width: 450px; /* Slightly smaller on desktop for better layout */
            }
        }

        /* Language Switcher Button Styling */
        .lang-button {
            @apply px-3 py-1 rounded-md text-sm font-medium transition-colors duration-300;
            background-color: var(--bg-secondary); /* Use secondary background */
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        .lang-button.active {
            background-color: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        .lang-button:hover:not(.active) {
            background-color: var(--hover-bg); /* Slightly lighter dark grey on hover */
        }

        /* Quiz styles */
        .quiz-option {
            @apply p-3 border rounded-md cursor-pointer transition-colors duration-200 flex items-center justify-between;
            background-color: var(--bg-main); /* Options use main background */
            border-color: var(--border-color); /* Darker border */
            color: var(--text-primary);
        }
        .quiz-option:hover {
            background-color: var(--hover-bg); /* Darker hover for options */
        }
        .quiz-option.selected { /* Added selected state */
            background-color: #3A4A5A; /* A darker blue that stands out on main bg */
            border-color: var(--accent);
        }
        .quiz-option.correct {
            background-color: #28A745; /* Green */
            border-color: #1A7A34; /* Darker Green */
            color: white;
        }
        .quiz-option.incorrect {
            background-color: #DC3545; /* Red */
            border-color: #A02833; /* Darker Red */
            color: white;
        }

        /* Fixed Bottom Navigation for Mobile */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--bg-secondary); /* Use secondary background */
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 60px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.5); /* Stronger shadow */
            z-index: 1000;
            border-top: 1px solid var(--border-color);
        }
        .bottom-nav-item {
            @apply flex flex-col items-center justify-center text-xs font-medium text-[var(--text-secondary)] transition-colors duration-200;
            flex: 1;
            height: 100%;
        }
        .bottom-nav-item.active {
            color: var(--highlight); /* Highlight color for active */
        }
        .bottom-nav-item:hover {
            background-color: var(--hover-bg); /* Darker secondary on hover */
        }
        .bottom-nav-item svg {
            width: 24px;
            height: 24px;
            margin-bottom: 2px;
        }

        /* Hide desktop sidebar and top header on mobile, and vice-versa */
        @media (max-width: 767px) {
            aside { display: none !important; }
            header.md\:hidden { display: flex !important; }
            .bottom-nav { display: flex; }
        }
        @media (min-width: 768px) {
            aside { display: flex !important; }
            header.md\:hidden { display: none !important; }
            .bottom-nav { display: none; }
        }

        /* Ripple Effect for Mobile Touch */
        .ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            animation: ripple-effect 0.8s ease-out;
            background-color: rgba(255, 255, 255, 0.4); /* Semi-transparent white for the ripple */
            pointer-events: none; /* Make sure it doesn't interfere with clicks */
            z-index: 9999; /* Ensure it's on top */
        }

        @keyframes ripple-effect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="flex h-screen bg-[var(--bg-main)]">
        <!-- Sidebar Navigation (Desktop) -->
        <aside class="hidden md:flex flex-col w-64 bg-white shadow-lg">
            <div class="p-4 border-b border-gray-200 flex items-center justify-center bg-[var(--bg-secondary)]">
                <div id="language-switcher-desktop" class="flex space-x-2">
                    <button class="lang-button" data-lang="en">EN</button>
                    <button class="lang-button" data-lang="zh">中</button>
                    <button class="lang-button" data-lang="ml">BM</button>
                </div>
            </div>
            <div class="flex items-center justify-center h-20 shadow-md bg-[var(--bg-secondary)]">
                <h1 class="text-xl font-bold text-[var(--text-primary)]" data-lang-key="sidebarTitle">🎣 钓鱼指南</h1>
            </div>
            <nav class="flex-1 px-2 py-4 space-y-2">
                <a href="#home" class="nav-link flex items-center px-4 py-2 text-lg font-medium text-[var(--text-secondary)] rounded-md" data-lang-key="navHome">首页</a>
                <a href="#science" class="nav-link flex items-center px-4 py-2 text-lg font-medium text-[var(--text-secondary)] rounded-md" data-lang-key="navScience">科学</a>
                <a href="#quiz" class="nav-link flex items-center px-4 py-2 text-lg font-medium text-[var(--text-secondary)] rounded-md" data-lang-key="navQuiz">测验</a>
                <a href="#pro-tips" class="nav-link flex items-center px-4 py-2 text-lg font-medium text-[var(--text-secondary)] rounded-md" data-lang-key="navProTips">秘籍</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
             <!-- Top Header (Mobile Only) -->
            <header class="md:hidden flex items-center bg-white p-4 shadow-md">
                <!-- Language Switcher on the left -->
                <div class="flex-shrink-0 mr-4">
                    <div id="language-switcher-mobile" class="flex space-x-2">
                        <button class="lang-button" data-lang="en">EN</button>
                        <button class="lang-button" data-lang="zh">中</button>
                        <button class="lang-button" data-lang="ml">BM</button>
                    </div>
                </div>
                <!-- Title on the right (no mobile menu button needed as bottom nav is primary) -->
                <div class="flex-1 flex justify-end items-center">
                    <h1 class="text-xl font-bold text-[var(--text-primary)]" data-lang-key="sidebarTitle">🎣 钓鱼指南</h1>
                </div>
            </header>

            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-[var(--bg-main)] p-4 sm:p-6 md:p-8">
                <!-- Home Section (now includes Meet the Fish) -->
                <section id="home" class="content-section">
                    <div class="bg-[var(--bg-secondary)] rounded-lg shadow p-8 text-center mb-8">
                        <h2 class="text-4xl font-bold text-[var(--text-primary)] mb-4" data-lang-key="homeTitle">欢迎来到“钓获烹饪”探险之旅！</h2>
                        <p class="text-lg text-[var(--text-secondary)] leading-relaxed max-w-3xl mx-auto" data-lang-key="homeIntro">
                            “钓获烹饪”(Hook & Cook) 渔场提供了一种独特的体验：亲手钓起鱼，然后立即在现场餐厅享用新鲜烹制的渔获。这不仅是垂钓的乐趣，更是运动、自然与美食的完美结合。本指南将带你深入探索鱼类生物学的奥秘，从了解鱼的感官到科学选择饵料，让你从普通垂钓者成长为一名对水生生物有深入理解的“垂钓科学家”。准备好开始你的探险了吗？
                        </p>
                        <!-- Ripple Hint for Mobile -->
                        <p class="md:hidden text-sm text-[var(--highlight)] mt-6 animate-pulse" data-lang-key="rippleHint">轻点背景，有惊喜！</p>
                    </div>

                    <!-- Meet the Fish content moved here -->
                    <div class="bg-[var(--bg-secondary)] rounded-lg shadow p-8 mb-8">
                        <h2 class="text-4xl font-bold text-center text-[var(--text-primary)] mb-8" data-lang-key="fishSpeciesTitle">认识鱼儿：马来西亚渔场常见居民</h2>
                        <p class="text-lg text-center text-[var(--text-secondary)] max-w-3xl mx-auto mb-12" data-lang-key="fishSpeciesIntro">马来西亚的休闲渔场拥有多种鱼类。了解它们的生物特性是成功垂钓的关键。点击下方的卡片，查看每种鱼的详细档案。</p>
                        <div id="fish-gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            <!-- Fish cards will be injected here by JS -->
                        </div>
                        <div class="mt-12 bg-white rounded-lg shadow p-8"> <!-- Changed to bg-white -->
                            <h3 class="text-2xl font-bold text-center mb-2 text-[var(--text-primary-dark)]" data-lang-key="fishComparisonTitle">鱼类特性对比</h3>
                            <p class="text-md text-center text-[var(--text-secondary-dark)] mb-2" data-lang-key="fishComparisonIntro">通过这个雷达图，直观地比较不同鱼类的关键特性。</p>
                            <!-- OPTIMIZATION: Added subtitle for chart scale explanation -->
                            <p class="text-xs text-center text-[var(--text-secondary-dark)] mb-4" data-lang-key="fishComparisonSubtitle"></p>
                            <div class="chart-container">
                                <canvas id="fish-chart"></canvas>
                            </div>
                        </div>
                    </div>

                     <div class="mt-8 bg-[var(--bg-secondary)] rounded-lg shadow p-8">
                        <h3 class="text-2xl font-bold text-center mb-6" data-lang-key="whatIsHookCookTitle">什么是“钓获烹饪”渔场？</h3>
                        <div class="grid md:grid-cols-2 gap-8 text-[var(--text-secondary)] leading-relaxed">
                            <div>
                                <h4 class="font-bold text-lg text-[var(--text-primary)] mb-2" data-lang-key="uniqueExperienceTitle">独特的休闲体验</h4>
                                <p data-lang-key="uniqueExperienceText">这些渔场是专为休闲垂钓设计的场所，通常由废弃的养鱼场改造或专门建造。在这里，游客可以体验垂钓的乐趣，并将渔获交给餐厅烹饪，实现“从钓到吃”的一站式服务，为家庭和初学者提供了理想的垂钓环境。</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg text-[var(--text-primary)] mb-2" data-lang-key="typicalEnvironmentTitle">典型的渔场环境</h4>
                                <p data-lang-key="typicalEnvironmentText">马来西亚的“钓获烹饪”渔场多为淡水环境，风光秀丽，宁静宜人。部分渔场也提供咸淡水环境，饲养着尖吻鲈、石斑鱼等鱼类。这些地方通常设施完善，配有餐厅、渔具店和舒适的垂钓小屋。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Science of Fishing Section (now with accordions) -->
                <section id="science" class="content-section hidden">
                    <h2 class="text-4xl font-bold text-center text-[var(--text-primary)] mb-8" data-lang-key="scienceTitle">科学钓法：解密鱼儿的觅食行为</h2>
                    <p class="text-lg text-center text-[var(--text-secondary)] max-w-3xl mx-auto mb-12" data-lang-key="scienceIntro">鱼类拥有高度发达的感官系统。了解它们如何感知世界，你就能像科学家一样选择最有效的策略和饵料。</p>
                    <div class="space-y-4">
                        <div class="science-accordion-item bg-[var(--bg-secondary)] rounded-lg shadow">
                            <button class="science-accordion-header" data-tab="vision" data-lang-key="tabVision">👁️ 视觉：水下之眼</button>
                            <div class="science-accordion-content" id="science-vision-content"></div>
                        </div>
                        <div class="science-accordion-item bg-[var(--bg-secondary)] rounded-lg shadow">
                            <button class="science-accordion-header" data-tab="chemo" data-lang-key="tabChemo">👃 味觉与嗅觉</button>
                            <div class="science-accordion-content" id="science-chemo-content"></div>
                        </div>
                        <div class="science-accordion-item bg-[var(--bg-secondary)] rounded-lg shadow">
                            <button class="science-accordion-header" data-tab="lateral" data-lang-key="tabLateral">〰️ 侧线：第六感</button>
                            <div class="science-accordion-content" id="science-lateral-content"></div>
                        </div>
                    </div>

                    <div class="mt-12 bg-[var(--bg-secondary)] rounded-lg shadow p-8">
                         <h3 class="text-2xl font-bold text-center mb-6" data-lang-key="baitRecommenderTitle">互动式饵料推荐器</h3>
                         <p class="text-md text-center text-[var(--text-secondary)] mb-6" data-lang-key="baitRecommenderIntro">不知道用什么饵料？选择你想要钓的目标鱼种，让我来为你推荐！</p>
                         <div class="flex flex-col items-center space-y-4">
                            <select id="fish-selector" class="p-2 border rounded-md bg-[var(--bg-main)] w-full max-w-xs text-[var(--text-primary)]">
                                <!-- Options will be injected by JS -->
                            </select>
                            <div id="bait-recommendation" class="mt-4 p-4 bg-[var(--bg-main)] rounded-lg text-center w-full max-w-md min-h-[80px]">
                                <p class="text-[var(--text-secondary)]" data-lang-key="selectFishPrompt">请先选择一种鱼...</p>
                            </div>
                         </div>
                    </div>
                </section>

                <!-- Quiz Section -->
                <section id="quiz" class="content-section hidden">
                    <h2 class="text-4xl font-bold text-center text-[var(--text-primary)] mb-8" data-lang-key="quizTitle">知识测验：考验你的垂钓智慧！</h2>
                    <p class="text-lg text-center text-[var(--text-secondary)] max-w-3xl mx-auto mb-12" data-lang-key="quizIntro">让我们看看你学到了多少鱼类生物学和负责任垂钓的知识。祝你好运！</p>
                    <div id="quiz-container" class="bg-[var(--bg-secondary)] rounded-lg shadow p-8 max-w-2xl mx-auto">
                        <!-- Quiz questions will be injected here by JS -->
                        <div id="quiz-questions"></div>
                        <button id="submit-quiz" class="mt-8 w-full bg-[var(--accent)] text-white font-bold py-3 px-6 rounded-md hover:bg-[var(--accent-dark)] transition-colors duration-300" data-lang-key="submitQuiz">提交测验</button>
                        <div id="quiz-results" class="mt-4 text-center text-xl font-bold hidden"></div>
                    </div>
                </section>

                <!-- Pro Tips Section -->
                <section id="pro-tips" class="content-section hidden">
                    <h2 class="text-4xl font-bold text-center text-[var(--text-primary)] mb-8" data-lang-key="proTipsTitle">高手秘籍：成为负责任的垂钓者</h2>
                     <p class="text-lg text-center text-[var(--text-secondary)] max-w-3xl mx-auto mb-12" data-lang-key="proTipsIntro">垂钓不仅是技巧，更是一份责任。遵循这些建议，享受乐趣的同时，也保护我们珍贵的水生资源。</p>
                    <div class="space-y-6 max-w-4xl mx-auto">
                        <div class="accordion-item bg-[var(--bg-secondary)] rounded-lg shadow">
                            <button class="accordion-header w-full text-left p-6 flex justify-between items-center">
                                <span class="text-xl font-semibold text-[var(--text-primary)]" data-lang-key="onSiteProcessTitle">📝 现场流程与建议携带</span>
                                <span class="text-2xl transform transition-transform duration-300">+</span>
                            </button>
                            <div class="accordion-content px-6 text-[var(--text-secondary)]">
                                <div class="py-4 border-t border-[var(--border-color)]">
                                    <h4 class="font-bold text-lg mb-2 text-[var(--text-primary)]" data-lang-key="suggestedProcessTitle">建议流程</h4>
                                    <ol class="list-decimal list-inside space-y-1">
                                        <li data-lang-key="process1">到前台登记，说明是初次体验，可租用钓竿。</li>
                                        <li data-lang-key="process2">告诉工作人员有小孩，他们会安排适合的水池。</li>
                                        <li data-lang-key="process3">钓鱼1–2小时（鱼饵用完可续买）。</li>
                                        <li data-lang-key="process4">钓到的鱼若想吃，可请厨房代为烹饪（或打包）。</li>
                                    </ol>
                                    <h4 class="font-bold text-lg mt-4 mb-2 text-[var(--text-primary)]" data-lang-key="whatToBringTitle">建议携带</h4>
                                     <ul class="list-disc list-inside space-y-1">
                                        <li data-lang-key="bring1">防晒帽 / 雨伞（若天气炎热或阵雨）。</li>
                                        <li data-lang-key="bring2">驱蚊液。</li>
                                        <li data-lang-key="bring3">手机充电宝（拍照 + 导航）。</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                         <div class="accordion-item bg-[var(--bg-secondary)] rounded-lg shadow">
                            <button class="accordion-header w-full text-left p-6 flex justify-between items-center">
                                <span class="text-xl font-semibold text-[var(--text-primary)]" data-lang-key="catchReleaseTitle">💚 “钓后放流”最佳实践</span>
                                <span class="text-2xl transform transition-transform duration-300">+</span>
                            </button>
                            <div class="accordion-content px-6 text-[var(--text-secondary)]">
                                <div class="py-4 border-t border-[var(--border-color)] space-y-3">
                                   <p data-lang-key="releaseIntro">如果你选择放流，请遵循以下步骤，以确保鱼儿能健康地回到水中。</p>
                                   <p><strong class="text-[var(--text-primary)]" data-lang-key="reduceAirExposureStrong">减少空气暴露：</strong> <span data-lang-key="reduceAirExposureText">尽量将鱼离开水面的时间控制在10秒内。鱼靠水获取氧气！</span></p>
                                   <p><strong class="text-[var(--text-primary)]" data-lang-key="wetHandsStrong">湿手操作：</strong> <span data-lang-key="wetHandsText">接触鱼前务必弄湿双手，保护鱼体表的保护性黏液。</span></p>
                                   <p><strong class="text-[var(--text-primary)]" data-lang-key="properSupportStrong">正确支撑：</strong> <span data-lang-key="properSupportText">用双手水平支撑鱼的身体，切勿抓其鳃或下颚。</span></p>
                                   <p><strong class="text-[var(--text-primary)]" data-lang-key="quickUnhookStrong">快速摘钩：</strong> <span data-lang-key="quickUnhookText">推荐使用无倒刺钩和摘钩工具。如果钩得太深，剪断鱼线是更好的选择。</span></p>
                                   <p><strong class="text-[var(--text-primary)]" data-lang-key="gentleReleaseStrong">温柔放流：</strong> <span data-lang-key="gentleReleaseText">将鱼头朝前轻轻放入水中，让水流过它的鳃。</span></p>
                                </div>
                            </div>
                        </div>

                         <div class="accordion-item bg-[var(--bg-secondary)] rounded-lg shadow">
                            <button class="accordion-header w-full text-left p-6 flex justify-between items-center">
                                <span class="text-xl font-semibold text-[var(--text-primary)]" data-lang-key="environmentalResponsibilityTitle">🌍 垂钓者的环保责任</span>
                                <span class="text-2xl transform transition-transform duration-300">+</span>
                            </button>
                            <div class="accordion-content px-6 text-[var(--text-secondary)]">
                                <div class="py-4 border-t border-[var(--border-color)] space-y-3">
                                   <p data-lang-key="environmentalResponsibilityText1">发展“垂钓者道德”是保护工作的重要部分。通过采纳最佳实践，即使在养殖池塘，我们也能为鱼类种群的健康和恢复力做出贡献。这培养了一种管理和责任感，将一项爱好转变为积极的环境保护形式。</p>
                                   <p data-lang-key="environmentalResponsibilityText2">你甚至可以成为一名“公民科学家”！通过报告你的渔获、尺寸等观察结果，可以帮助管理人员更好地了解鱼塘的健康状况。你不仅仅是参与者，更是科学和保护工作的贡献者！</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </section>

            </main>
        </div>
    </div>

    <!-- Fixed Bottom Navigation for Mobile -->
    <nav class="bottom-nav md:hidden">
        <a href="#home" class="bottom-nav-item active" data-nav-section="home">
            <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
            <span data-lang-key="navHome">首页</span>
        </a>
        <a href="#science" class="bottom-nav-item" data-nav-section="science">
            <!-- Using a beaker icon for science -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5.5 22h13c.8 0 1.5-.7 1.5-1.5v-13c0-.8-.7-1.5-1.5-1.5h-13c-.8 0-1.5.7-1.5 1.5v13c0 .8.7 1.5 1.5 1.5z"/><path d="M4 6h16"/><path d="M10 2v4"/><path d="M14 2v4"/><path d="M8 12h.01"/><path d="M12 12h.01"/><path d="M16 12h.01"/><path d="M8 16h.01"/><path d="M12 16h.01"/><path d="M16 16h.01"/></svg>
            <span data-lang-key="navScience">科学</span>
        </a>
        <a href="#quiz" class="bottom-nav-item" data-nav-section="quiz">
             <!-- Using a question mark icon for quiz -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
            <span data-lang-key="navQuiz">测验</span>
        </a>
        <a href="#pro-tips" class="bottom-nav-item" data-nav-section="pro-tips">
            <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>
            <span data-lang-key="navProTips">秘籍</span>
        </a>
    </nav>

    <!-- Modal -->
    <div id="fish-modal" class="modal-backdrop fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden z-50">
        <div class="modal-content bg-[var(--bg-secondary)] rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto transform scale-95">
            <div class="sticky top-0 bg-[var(--bg-secondary)] p-4 border-b border-[var(--border-color)] flex justify-between items-center z-10">
                 <h3 id="modal-title" class="text-2xl font-bold text-[var(--text-primary)]"></h3>
                 <button id="close-modal" class="text-gray-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <div id="modal-body" class="p-6 text-[var(--text-secondary)] space-y-4">
                <!-- Modal content injected by JS -->
            </div>
        </div>
    </div>

    <script>
        (function() { // IIFE to encapsulate the script
            const translations = {
                en: {
                    sidebarTitle: "🎣 Fishing Guide",
                    navHome: "Home",
                    navScience: "Science",
                    navProTips: "Pro Tips",
                    navQuiz: "Quiz",
                    homeTitle: "Welcome to Your \"Hook & Cook\" Adventure!",
                    homeIntro: "\"Hook & Cook\" fisheries offer a unique experience: catch fish with your own hands, then immediately enjoy freshly cooked catches at the on-site restaurant. This is not just the joy of fishing, but a perfect blend of sport, nature, and gastronomy. This guide will take you deep into the mysteries of fish biology, from understanding fish senses to scientifically choosing baits, helping you grow from a casual angler into an \"angling scientist\" with a profound understanding of aquatic life. Ready to start your adventure?",
                    rippleHint: "Tap the background for a surprise!",
                    whatIsHookCookTitle: "What is a \"Hook & Cook\" Fishery?",
                    uniqueExperienceTitle: "Unique Leisure Experience",
                    uniqueExperienceText: "These fisheries are venues specifically designed for recreational fishing, often converted from disused fish farms or purpose-built ponds, aiming to provide a unique leisure experience. Here, visitors can enjoy the thrill of fishing and choose to have their caught fish prepared by the on-site restaurant, offering a one-stop \"catch-to-cook\" service, providing an ideal fishing environment for families and beginners.",
                    typicalEnvironmentTitle: "Typical Fishery Environment",
                    typicalEnvironmentText: "Many \"Hook & Cook\" fishing ponds in Malaysia are typically freshwater environments, surrounded by natural scenery, offering a tranquil recreational experience. Some ponds may also offer brackish water environments, where fish species like Barramundi and Snapper are reared. These places are usually well-equipped with facilities such as restaurants, tackle shops, and comfortable fishing huts.",
                    fishSpeciesTitle: "Meet the Fish: Common Residents of Malaysian Fisheries",
                    fishSpeciesIntro: "Malaysian recreational fisheries host a diverse range of fish species. Understanding their biological characteristics is crucial for successful angling. Click on the cards below to view detailed profiles for each fish.",
                    fishComparisonTitle: "Fish Characteristics Comparison",
                    fishComparisonIntro: "Compare key characteristics of different fish species visually using this radar chart.",
                    fishComparisonSubtitle: "Scale from 1 (center) to 5 (edge). Hover over points for details.", // New
                    chartLabelDiet: "Diet", // New
                    chartLabelFight: "Fight", // New
                    chartLabelHabitat: "Habitat", // New
                    chartValues: { // New
                        diet: ["", "Herbivore", "Omnivore (Plant-leaning)", "Omnivore", "Omnivore (Meat-leaning)", "Carnivore"],
                        fight: ["", "Weak", "Mild", "Moderate", "Strong", "Very Strong"],
                        habitat: ["", "Bottom", "Low-Mid", "Mid-water", "Mid-Top", "Surface"]
                    },
                    scale: { low: "Low", mid: "Mid", high: "High" }, // New
                    tabVision: "👁️ Vision: Underwater Eyes",
                    tabChemo: "👃 Taste & Smell",
                    tabLateral: "〰️ Lateral Line: Sixth Sense",
                    scienceTitle: "The Science of Fishing: Unraveling Fish Feeding Behavior",
                    scienceIntro: "Fish possess highly developed sensory systems. Understanding how they perceive the world will allow you to choose the most effective strategies and baits like a true scientist.",
                    baitRecommenderTitle: "Interactive Bait Recommender",
                    baitRecommenderIntro: "Not sure what bait to use? Select your target fish species, and let me recommend the perfect bait for you!",
                    selectFishPrompt: "Please select a fish first...",
                    baitRecPrompt: "Recommended Baits:", // New
                    quizTitle: "Knowledge Quiz: Test Your Angling Smarts!",
                    quizIntro: "Let's see how much you've learned about fish biology and responsible angling. Good luck!",
                    submitQuiz: "Submit Quiz",
                    yourScore: "Your Score:",
                    answerAllQuestions: "Please answer all questions before submitting.",
                    proTipsTitle: "Pro Tips: Becoming a Responsible Angler",
                    proTipsIntro: "Angling is not just about skill, but also responsibility. Follow these tips to enjoy the fun while protecting our precious aquatic resources.",
                    onSiteProcessTitle: "📝 On-site Process & What to Bring",
                    suggestedProcessTitle: "Suggested Process",
                    process1: "Register at the counter, state it's your first time, and you can rent fishing rods.",
                    process2: "Inform staff you have children; they will arrange a suitable pond.",
                    process3: "Fish for 1–2 hours (bait can be refilled if used up).",
                    process4: "If you want to eat your catch, the kitchen can cook it for you (or pack it).",
                    whatToBringTitle: "Suggested Items to Bring",
                    bring1: "Sun hat / Umbrella (if weather is hot or showery).",
                    bring2: "Mosquito repellent.",
                    bring3: "Power bank (for photos + navigation).",
                    catchReleaseTitle: "💚 \"Catch & Release\" Best Practices",
                    releaseIntro: "If you choose to release, follow these steps to ensure the fish returns to the water healthy.",
                    reduceAirExposureStrong: "Reduce Air Exposure:",
                    reduceAirExposureText: "Try to keep the fish out of water for 10 seconds or less. Fish need water for oxygen!",
                    wetHandsStrong: "Wet Hands:",
                    wetHandsText: "Always wet your hands before touching the fish to protect its protective slime coat.",
                    properSupportStrong: "Proper Support:",
                    properSupportText: "Support the fish's body horizontally with both hands when taking it out of the water. Never hold it by its gills or jaw.",
                    quickUnhookStrong: "Quick Unhooking:",
                    quickUnhookText: "Barbless hooks and dehooking tools are recommended. If deep-hooked, cutting the line is often better.",
                    gentleReleaseStrong: "Gentle Release:",
                    gentleReleaseText: "Gently place the fish headfirst into the water, allowing water to flow over its gills.",
                    environmentalResponsibilityTitle: "🌍 Angler's Environmental Responsibility",
                    environmentalResponsibilityText1: "Developing \"angler ethics\" is a vital part of conservation efforts. By adopting best practices, even in farmed ponds, we can contribute to the health and resilience of fish populations. This fosters a sense of stewardship and responsibility, transforming a hobby into an active form of environmental conservation.",
                    environmentalResponsibilityText2: "You can even become a \"citizen scientist\"! By reporting your catches, sizes, and other observations, you can help managers better understand the health of the pond's fish. You are not just a participant, but a contributor to scientific and conservation efforts!",
                },
                zh: {
                    sidebarTitle: "🎣 钓鱼指南",
                    navHome: "首页",
                    navScience: "科学",
                    navProTips: "秘籍",
                    navQuiz: "测验",
                    homeTitle: "欢迎来到“钓获烹饪”探险之旅！",
                    homeIntro: "“钓获烹饪”(Hook & Cook) 渔场提供了一种独特的体验：亲手钓起鱼，然后立即在现场餐厅享用新鲜烹制的渔获。这不仅是垂钓的乐趣，更是运动、自然与美食的完美结合。本指南将带你深入探索鱼类生物学的奥秘，从了解鱼的感官到科学选择饵料，让你从普通垂钓者成长为一名对水生生物有深入理解的“垂钓科学家”。准备好开始你的探险了吗？",
                    rippleHint: "轻点背景，有惊喜！",
                    whatIsHookCookTitle: "什么是“钓获烹饪”渔场？",
                    uniqueExperienceTitle: "独特的休闲体验",
                    uniqueExperienceText: "这些渔场是专为休闲垂钓设计的场所，通常由废弃的养鱼场改造或专门建造。在这里，游客可以体验垂钓的乐趣，并将渔获交给餐厅烹饪，实现“从钓到吃”的一站式服务，为家庭和初学者提供了理想的垂钓环境。",
                    typicalEnvironmentTitle: "典型的渔场环境",
                    typicalEnvironmentText: "马来西亚的“钓获烹饪”渔场多为淡水环境，风光秀丽，宁静宜人。部分渔场也提供咸淡水环境，饲养着尖吻鲈、石斑鱼等鱼类。这些地方通常设施完善，配有餐厅、渔具店和舒适的垂钓小屋。",
                    fishSpeciesTitle: "认识鱼儿：马来西亚渔场常见居民",
                    fishSpeciesIntro: "马来西亚的休闲渔场拥有多种鱼类。了解它们的生物特性是成功垂钓的关键。点击下方的卡片，查看每种鱼的详细档案。",
                    fishComparisonTitle: "鱼类特性对比",
                    fishComparisonIntro: "通过这个雷达图，直观地比较不同鱼类的关键特性。",
                    fishComparisonSubtitle: "数值从1（中心）到5（边缘）。悬停在数据点上可查看详情。", // New
                    chartLabelDiet: "食性", // New
                    chartLabelFight: "搏斗力", // New
                    chartLabelHabitat: "栖息层", // New
                    chartValues: { // New
                        diet: ["", "草食性", "杂食性 (偏植物)", "杂食性", "杂食性 (偏肉食)", "肉食性"],
                        fight: ["", "弱", "较弱", "中等", "强", "非常强"],
                        habitat: ["", "底层", "中下层", "中层", "中上层", "上层"]
                    },
                    scale: { low: "低", mid: "中", high: "高" }, // New
                    tabVision: "👁️ 视觉：水下之眼",
                    tabChemo: "👃 味觉与嗅觉",
                    tabLateral: "〰️ 侧线：第六感",
                    scienceTitle: "科学钓法：解密鱼儿的觅食行为",
                    scienceIntro: "鱼类拥有高度发达的感官系统。了解它们如何感知世界，你就能像科学家一样选择最有效的策略和饵料。",
                    baitRecommenderTitle: "互动式饵料推荐器",
                    baitRecommenderIntro: "不知道用什么饵料？选择你想要钓的目标鱼种，让我来为你推荐！",
                    selectFishPrompt: "请先选择一种鱼...",
                    baitRecPrompt: "推荐鱼饵：", // New
                    quizTitle: "知识测验：考验你的垂钓智慧！",
                    quizIntro: "让我们看看你学到了多少鱼类生物学和负责任垂钓的知识。祝你好运！",
                    submitQuiz: "提交测验",
                    yourScore: "你的得分：",
                    answerAllQuestions: "提交前请回答所有问题。",
                    proTipsTitle: "高手秘籍：成为负责任的垂钓者",
                    proTipsIntro: "垂钓不仅是技巧，更是一份责任。遵循这些建议，享受乐趣的同时，也保护我们珍贵的水生资源。",
                    onSiteProcessTitle: "📝 现场流程与建议携带",
                    suggestedProcessTitle: "建议流程",
                    process1: "到前台登记，说明是初次体验，可租用钓竿。",
                    process2: "告诉工作人员有小孩，他们会安排适合的水池。",
                    process3: "钓鱼1–2小时（鱼饵用完可续买）。",
                    process4: "钓到的鱼若想吃，可请厨房代为烹饪（或打包）。",
                    whatToBringTitle: "建议携带",
                    bring1: "防晒帽 / 雨伞（若天气炎热或阵雨）。",
                    bring2: "驱蚊液。",
                    bring3: "手机充电宝（拍照 + 导航）。",
                    catchReleaseTitle: "💚 “钓后放流”最佳实践",
                    releaseIntro: "如果你选择放流，请遵循以下步骤，以确保鱼儿能健康地回到水中。",
                    reduceAirExposureStrong: "减少空气暴露：",
                    reduceAirExposureText: "尽量将鱼离开水面的时间控制在10秒内。鱼靠水获取氧气！",
                    wetHandsStrong: "湿手操作：",
                    wetHandsText: "接触鱼前务必弄湿双手，保护鱼体表的保护性黏液。",
                    properSupportStrong: "正确支撑：",
                    properSupportText: "用双手水平支撑鱼的身体，切勿抓其鳃或下颚。",
                    quickUnhookStrong: "快速摘钩：",
                    quickUnhookText: "推荐使用无倒刺钩和摘钩工具。如果钩得太深，剪断鱼线是更好的选择。",
                    gentleReleaseStrong: "温柔放流：",
                    gentleReleaseText: "将鱼头朝前轻轻放入水中，让水流过它的鳃。",
                    environmentalResponsibilityTitle: "🌍 垂钓者的环保责任",
                    environmentalResponsibilityText1: "发展“垂钓者道德”是保护工作的重要部分。通过采纳最佳实践，即使在养殖池塘，我们也能为鱼类种群的健康和恢复力做出贡献。这培养了一种管理和责任感，将一项爱好转变为积极的环境保护形式。",
                    environmentalResponsibilityText2: "你甚至可以成为一名“公民科学家”！通过报告你的渔获、尺寸等观察结果，可以帮助管理人员更好地了解鱼塘的健康状况。你不仅仅是参与者，更是科学和保护工作的贡献者！",
                },
                ml: {
                    sidebarTitle: "🎣 Panduan Memancing",
                    navHome: "Utama",
                    navScience: "Sains",
                    navProTips: "Petua",
                    navQuiz: "Kuiz",
                    homeTitle: "Selamat Datang ke Pengembaraan \"Hook & Cook\" Anda!",
                    homeIntro: "Kolam pancing \"Hook & Cook\" menawarkan pengalaman unik: tangkap ikan dengan tangan sendiri, kemudian nikmati hasil tangkapan yang baru dimasak di restoran di lokasi. Ini bukan sahaja kegembiraan memancing, tetapi gabungan sempurna antara sukan, alam semula jadi, dan gastronomi. Panduan ini akan membawa anda menyelami misteri biologi ikan, daripada memahami deria ikan hingga memilih umpan secara saintifik, membantu anda berkembang daripada pemancing biasa menjadi \"saintis memancing\" dengan pemahaman mendalam tentang hidupan akuatik. Bersedia untuk memulakan pengembaraan anda?",
                    rippleHint: "Ketik latar belakang untuk kejutan!",
                    whatIsHookCookTitle: "Apa itu Kolam Pancing \"Hook & Cook\"?",
                    uniqueExperienceTitle: "Pengalaman Santai Unik",
                    uniqueExperienceText: "Tempat memancing ini direka khas untuk memancing rekreasi, sering diubah suai daripada ladang ikan yang tidak digunakan atau kolam yang dibina khas, bertujuan untuk menyediakan pengalaman rekreasi yang unik. Di sini, pengunjung boleh menikmati keseronokan memancing dan memilih untuk memasak ikan yang ditangkap oleh restoran di lokasi, menawarkan perkhidmatan \"tangkap-masak\" sehenti, menyediakan persekitaran memancing yang ideal untuk keluarga dan pemula.",
                    typicalEnvironmentTitle: "Persekitaran Kolam Pancing Biasa",
                    typicalEnvironmentText: "Banyak kolam pancing \"Hook & Cook\" di Malaysia biasanya adalah persekitaran air tawar, dikelilingi oleh pemandangan semula jadi, menawarkan pengalaman rekreasi yang tenang. Sesetengah kolam mungkin juga menawarkan persekitaran air payau, di mana spesies ikan seperti Siakap dan Kakap Merah diternak. Tempat-tempat ini biasanya dilengkapi dengan kemudahan seperti restoran, kedai peralatan memancing, dan pondok memancing yang selesa.",
                    fishSpeciesTitle: "Kenali Ikan: Penduduk Biasa Kolam Pancing Malaysia",
                    fishSpeciesIntro: "Kolam pancing rekreasi Malaysia menempatkan pelbagai spesies ikan. Memahami ciri-ciri biologi mereka adalah penting untuk strategi memancing yang berjaya. Klik pada kad di bawah untuk melihat profil terperinci setiap ikan.",
                    fishComparisonTitle: "Perbandingan Ciri-ciri Ikan",
                    fishComparisonIntro: "Bandingkan ciri-ciri utama spesies ikan yang berbeza secara visual menggunakan carta radar ini.",
                    fishComparisonSubtitle: "Skala dari 1 (tengah) hingga 5 (tepi). Tuding pada titik untuk butiran.", // New
                    chartLabelDiet: "Diet", // New
                    chartLabelFight: "Daya Lawan", // New
                    chartLabelHabitat: "Habitat", // New
                    chartValues: { // New
                        diet: ["", "Herbivor", "Omnivor (cenderung tumbuhan)", "Omnivor", "Omnivor (cenderung daging)", "Karnivor"],
                        fight: ["", "Lemah", "Sederhana Lemah", "Sederhana", "Kuat", "Sangat Kuat"],
                        habitat: ["", "Dasar", "Pertengahan Bawah", "Pertengahan Air", "Pertengahan Atas", "Permukaan"]
                    },
                    scale: { low: "Rendah", mid: "Sederhana", high: "Tinggi" }, // New
                    tabVision: "👁️ Penglihatan: Mata Bawah Air",
                    tabChemo: "👃 Rasa & Bau",
                    tabLateral: "〰️ Garis Lateral: Deria Keenam",
                    scienceTitle: "Sains Memancing: Membongkar Tingkah Laku Pemakanan Ikan",
                    scienceIntro: "Ikan mempunyai sistem deria yang sangat maju. Memahami bagaimana mereka melihat dunia akan membolehkan anda memilih strategi dan umpan yang paling berkesan seperti saintis sebenar.",
                    baitRecommenderTitle: "Pencadang Umpan Interaktif",
                    baitRecommenderIntro: "Tidak pasti umpan apa yang hendak digunakan? Pilih spesies ikan sasaran anda, dan biarkan saya mengesyorkan umpan yang sempurna untuk anda!",
                    selectFishPrompt: "Sila pilih ikan dahulu...",
                    baitRecPrompt: "Umpan Disyorkan:", // New
                    quizTitle: "Kuiz Pengetahuan: Uji Kepintaran Memancing Anda!",
                    quizIntro: "Mari kita lihat berapa banyak yang telah anda pelajari tentang biologi ikan dan memancing yang bertanggungjawab. Semoga berjaya!",
                    submitQuiz: "Hantar Kuiz",
                    yourScore: "Skor Anda:",
                    answerAllQuestions: "Sila jawab semua soalan sebelum menghantar.",
                    proTipsTitle: "Petua Pro: Menjadi Pemancing yang Bertanggungjawab",
                    proTipsIntro: "Memancing bukan sahaja tentang kemahiran, tetapi juga tanggungjawab. Ikuti petua ini untuk menikmati keseronokan sambil melindungi sumber akuatik kita yang berharga.",
                    onSiteProcessTitle: "📝 Proses di Lokasi & Apa yang Perlu Dibawa",
                    suggestedProcessTitle: "Proses yang Disyorkan",
                    process1: "Daftar di kaunter, nyatakan ini kali pertama anda, dan anda boleh menyewa joran.",
                    process2: "Maklumkan kakitangan anda mempunyai anak; mereka akan mengatur kolam yang sesuai.",
                    process3: "Memancing selama 1–2 jam (umpan boleh diisi semula jika habis).",
                    process4: "Jika anda ingin makan hasil tangkapan anda, dapur boleh memasaknya untuk anda (atau bungkus).",
                    whatToBringTitle: "Barang yang Disyorkan untuk Dibawa",
                    bring1: "Topi matahari / Payung (jika cuaca panas atau hujan renyai).",
                    bring2: "Penghalau nyamuk.",
                    bring3: "Power bank (untuk foto + navigasi).",
                    catchReleaseTitle: "💚 Amalan Terbaik \"Tangkap & Lepas\"",
                    releaseIntro: "Jika anda memilih untuk melepaskan, ikuti langkah-langkah ini untuk memastikan ikan kembali ke air dengan sihat.",
                    reduceAirExposureStrong: "Kurangkan Pendedahan Udara:",
                    reduceAirExposureText: "Cuba pastikan ikan keluar dari air untuk 10 saat atau kurang. Ikan memerlukan air untuk oksigen!",
                    wetHandsStrong: "Tangan Basah:",
                    wetHandsText: "Sentiasa basahkan tangan anda sebelum menyentuh ikan untuk melindungi lapisan lendir pelindungnya.",
                    properSupportStrong: "Sokongan yang Betul:",
                    properSupportText: "Sokong berat badan ikan secara mendatar dengan kedua-dua tangan apabila mengeluarkannya dari air. Jangan sekali-kali memegang ikan pada rahang, insang, atau matanya.",
                    quickUnhookStrong: "Cepat Tanggalkan Mata Kail:",
                    quickUnhookText: "Mata kail tanpa duri dan alat menanggalkan mata kail disyorkan. Jika mata kail tertelan dalam, memotong tali pancing selalunya lebih baik.",
                    gentleReleaseStrong: "Lepaskan dengan Lembut:",
                    gentleReleaseText: "Lepaskan ikan perlahan-lahan ke dalam air dengan kepala dahulu, membenarkan air mengalir melalui mulut dan insangnya.",
                    environmentalResponsibilityTitle: "🌍 Tanggunggungjawab Alam Sekitar Pemancing",
                    environmentalResponsibilityText1: "Membangunkan \"etika pemancing\" adalah bahagian penting dalam usaha pemuliharaan. Dengan mengamalkan amalan terbaik, walaupun di kolam ternakan, kita boleh menyumbang kepada kesihatan dan daya tahan populasi ikan. Ini memupuk rasa tanggungjawab dan penjagaan, mengubah hobi menjadi bentuk pemuliharaan alam sekitar yang aktif.",
                    environmentalResponsibilityText2: "Anda juga boleh menjadi \"saintis warganara\"! Dengan melaporkan tangkapan, saiz, and pemerhatian lain anda, Anda boleh membantu pengurus memahami dengan lebih baik kesihatan dan trend populasi ikan di kolam. Anda bukan sahaja peserta, tetapi penyumbang kepada pemahaman saintifik dan usaha pemuliharaan!",
                }
            };

            let currentLanguage = 'en';

            const fishData = {
                pacu: {
                    imageUrl: "https://raw.githubusercontent.com/luoxisg/fishing/main/image/pacu.jpg",
                    chartData: { diet: 2, fight: 3, habitat: 3 }, // 1=Herb,5=Carn | 1=Weak,5=Strong | 1=Bottom,5=Top
                    name: { en: "Pacu", zh: "巨脂鲤 (Pacu)", ml: "Pacu" },
                    description: {
                        en: "Native to South America, despite being related to piranhas, they are generally docile. Their flattened body is adapted for movement among aquatic plants.",
                        zh: "原产于南美洲，尽管与食人鱼有亲缘关系，但性情温和。身体扁平，适合在水生植物间穿梭。",
                        ml: "Berasal dari Amerika Selatan, walaupun berkaitan dengan piranha, mereka umumnya jinak. Bentuk badan mereka yang rata disesuaikan untuk bergerak di antara tumbuhan akuatik."
                    },
                    details: {
                        en: `<p><strong class="text-[var(--text-primary)]">Scientific Classification:</strong> Family Serrasalmidae. Common genera include *Colossoma* and *Piaractus*.</p><p><strong class="text-[var(--text-primary)]">Habitat and Behavior:</strong> Prefer rivers, lakes, and floodplains. In ponds, they can grow very large, weighing over 5kg. Generally docile and non-aggressive.</p><p><strong class="text-[var(--text-primary)]">Diet and Feeding Habits:</strong> Primarily omnivorous, but prefer plant matter, especially fruits, seeds, and nuts. Their strong crushing system is specialized for processing plant-based foods.</p>`,
                        zh: `<p><strong class="text-[var(--text-primary)]">科学分类：</strong> 锯脂鲤科。常见属包括 *Colossoma* 和 *Piaractus*。</p><p><strong class="text-[var(--text-primary)]">栖息地与行为：</strong> 喜欢河流、湖泊和洪泛区。在池塘中，它们可以长到很大，体重可达5公斤以上。性情温和，不具攻击性。</p><p><strong class="text-[var(--text-primary)]">食性与摄食习惯：</strong> 主要为杂食性，但偏爱植物，特别是水果、种子和坚果。它们强大的咀嚼系统专门用于处理植物性食物。</p>`,
                        ml: `<p><strong class="text-[var(--text-primary)]">Klasifikasi Saintifik:</strong> Famili Serrasalmidae. Genus biasa termasuk *Colossoma* dan *Piaractus*.</p><p><strong class="text-[var(--text-primary)]">Habitat dan Tingkah Laku:</strong> Lebih suka sungai, tasik, dan dataran banjir. Di kolam, mereka boleh membesar sehingga lebih 5kg. Umumnya jinak dan tidak agresif.</p><p><strong class="text-[var(--text-primary)]">Diet dan Tabiat Pemakanan:</strong> Terutamanya omnivor, tetapi lebih suka bahan tumbuhan, terutamanya buah-buahan, biji-bijian, dan kacang. Sistem rahang penghancur mereka khusus untuk memproses makanan berasaskan tumbuhan.</p>`
                    },
                    baits: {
                        en: ["Fruits", "Dough Balls", "Plant-based baits"],
                        zh: ["水果", "面团球", "植物性饵料"],
                        ml: ["Buah-buahan", "Bola Doh", "Umpan berasaskan tumbuhan"]
                    }
                },
                tilapia: {
                    imageUrl: "https://raw.githubusercontent.com/luoxisg/fishing/main/image/tilapia.jpg",
                    chartData: { diet: 1, fight: 1, habitat: 4 },
                    name: { en: "Tilapia", zh: "罗非鱼 (Tilapia)", ml: "Tilapia" },
                    description: {
                        en: "Native to Africa, very hardy and easily domesticated, a common species in aquaculture.",
                        zh: "原产于非洲，生命力顽强，易于驯化，是水产养殖的常见鱼种。",
                        ml: "Berasal dari Afrika, sangat tahan lasak dan mudah dijinakkan, spesies biasa dalam akuakultur."
                    },
                    details: {
                        en: `<p><strong class="text-[var(--text-primary)]">Scientific Classification:</strong> Genus *Oreochromis*, e.g., Nile Tilapia.</p><p><strong class="text-[var(--text-primary)]">Habitat and Behavior:</strong> Inhabit shallow streams, ponds, rivers, and lakes. Considered one of the world's most invasive alien species due to widespread introduction.</p><p><strong class="text-[var(--text-primary)]">Diet and Feeding Habits:</strong> Mainly herbivorous, feeding on plankton, algae, and other plant matter. May also prey on worms and small fish when young.</p>`,
                        zh: `<p><strong class="text-[var(--text-primary)]">科学分类：</strong> 口孵非鲫属，例如尼罗罗非鱼。</p><p><strong class="text-[var(--text-primary)]">栖息地与行为：</strong> 栖息于浅溪、池塘、河流和湖泊。因其广泛引入而被视为全球最具侵略性的外来物种之一。</p><p><strong class="text-[var(--text-primary)]">食性与摄食习惯：</strong> 主要是草食性，以浮游生物、藻类和其他植物为食。幼年时也可能捕食蠕虫和小鱼。</p>`,
                        ml: `<p><strong class="text-[var(--text-primary)]">Klasifikasi Saintifik:</strong> Genus *Oreochromis*, cth., Tilapia Nil.</p><p><strong class="text-[var(--text-primary)]">Habitat dan Tingkah Laku:</strong> Mendiami sungai cetek, kolam, sungai, dan tasik. Dianggap sebagai salah satu spesies asing paling invasif di dunia kerana pengenalan meluas.</p><p><strong class="text-[var(--text-primary)]">Diet dan Tabiat Pemakanan:</strong> Terutamanya herbivor, memakan plankton, alga, dan bahan tumbuhan lain. Mungkin juga memakan cacing dan ikan kecil apabila muda.</p>`
                    },
                    baits: {
                        en: ["Dough Balls", "Algae baits", "Plant-based baits"],
                        zh: ["面团球", "藻类饵料", "植物性饵料"],
                        ml: ["Bola Doh", "Umpan alga", "Umpan berasaskan tumbuhan"]
                    }
                },
                catfish: {
                    imageUrl: "https://raw.githubusercontent.com/luoxisg/fishing/main/image/Catfish.jpg",
                    chartData: { diet: 5, fight: 5, habitat: 1 },
                    name: { en: "Catfish", zh: "鲶鱼 (Catfish)", ml: "Ikan Keli" },
                    description: {
                        en: "Typically predatory fish with voracious appetites, strong fighters when hooked, and highly interested in strong odors.",
                        zh: "通常是捕食性鱼类，食欲旺盛，上钩后搏斗力强劲，对强烈气味极感兴趣。",
                        ml: "Biasanya ikan pemangsa dengan selera makan yang rakus, pejuang yang kuat apabila terpancing, dan sangat tertarik kepada bau yang kuat."
                    },
                    details: {
                        en: `<p><strong class="text-[var(--text-primary)]">Scientific Classification:</strong> Order Siluriformes. Common species include Boal Catfish and Striped Catfish. Redtail and Mekong Catfish are also common.</p><p><strong class="text-[var(--text-primary)]">Habitat and Behavior:</strong> Live in deep waters and bottoms of lakes and rivers. Known for their strong fight.</p><p><strong class="text-[var(--text-primary)]">Diet and Feeding Habits:</strong> Predatory fish, mainly feeding on other fish. Have voracious appetites and show great interest in strong odors (e.g., chicken liver).</p>`,
                        zh: `<p><strong class="text-[var(--text-primary)]">科学分类：</strong> 鲶形目。常见种类包括博尔鲶鱼和条纹鲶鱼。红尾鲶和湄公鲶也很常见。</p><p><strong class="text-[var(--text-primary)]">栖息地与行为：</strong> 生活在湖泊和河流的深水区和底部。以其强劲的搏斗而闻名。</p><p><strong class="text-[var(--text-primary)]">食性与摄食习惯：</strong> 捕食性鱼类，主要以其他鱼类为食。食欲旺盛，对强烈气味（如鸡肝）表现出极大兴趣。</p>`,
                        ml: `<p><strong class="text-[var(--text-primary)]">Klasifikasi Saintifik:</strong> Order Siluriformes. Spesies biasa termasuk Ikan Keli Boal dan Ikan Keli Berjalur. Ikan Keli Ekor Merah dan Ikan Keli Mekong juga biasa.</p><p><strong class="text-[var(--text-primary)]">Habitat dan Tingkah Laku:</strong> Hidup di perairan dalam dan dasar tasik dan sungai. Terkenal dengan pertarungan yang kuat.</p><p><strong class="text-[var(--text-primary)]">Diet dan Tabiat Pemakanan:</strong> Pemangsa oportunistik. Juvenil memakan krustasea, dewasa hampir sepenuhnya memakan ikan. Mereka makan dengan menghisap dan menelan mangsa secara keseluruhan.</p>`
                    },
                    baits: {
                        en: ["Chicken Liver", "Cut Fish", "Worms", "Stink Dough Balls"],
                        zh: ["鸡肝", "切块鱼肉", "蠕虫", "臭味面团球"],
                        ml: ["Hati Ayam", "Potongan Ikan", "Cacing", "Bola Doh Berbau"]
                    }
                },
                barramundi: {
                    imageUrl: "https://raw.githubusercontent.com/luoxisg/fishing/main/image/Barramundi.jpg",
                    chartData: { diet: 5, fight: 4, habitat: 2 },
                    name: { en: "Barramundi", zh: "尖吻鲈 (Barramundi)", ml: "Siakap" },
                    description: {
                        en: "Opportunistic predators, spending most of their lives in freshwater but migrating to saltwater to breed. Prefer to hide under cover.",
                        zh: "机会主义捕食者，大部分时间生活在淡水中，但会洄游到咸水繁殖。喜欢躲藏在遮蔽物下。",
                        ml: "Pemangsa oportunistik, menghabiskan sebahagian besar hidup mereka di air tawar tetapi berhijrah ke air masin untuk membiak. Lebih suka bersembunyi di bawah perlindungan."
                    },
                    details: {
                        en: `<p><strong class="text-[var(--text-primary)]">Scientific Classification:</strong> Genus *Lates*, species *Lates calcarifer*.</p><p><strong class="text-[var(--text-primary)]">Habitat and Behavior:</strong> Adaptable to wide salinity changes, prefer to hide under logs or other objects. May school in feeding aggregations.</p><p><strong class="text-[var(--text-primary)]">Diet and Feeding Habits:</strong> Opportunistic predators. Juveniles eat crustaceans, adults feed almost entirely on fish. They suction feed and swallow prey whole.</p>`,
                        zh: `<p><strong class="text-[var(--text-primary)]">科学分类：</strong> 尖吻鲈属，学名 *Lates calcarifer*。</p><p><strong class="text-[var(--text-primary)]">栖息地与行为：</strong> 能适应广泛的盐度变化，喜欢躲藏在原木或其他物体下方。捕食时可能会成群结队。</p><p><strong class="text-[var(--text-primary)]">食性与摄食习惯：</strong> 机会主义捕食者。幼鱼吃甲壳类，成鱼几乎完全以鱼类为食。它们通过吸食的方式将食物整吞。</p>`,
                        ml: `<p><strong class="text-[var(--text-primary)]">Klasifikasi Saintifik:</strong> Genus *Lates*, spesies *Lates calcarifer*.</p><p><strong class="text-[var(--text-primary)]">Habitat dan Tingkah Laku:</strong> Boleh menyesuaikan diri dengan perubahan kemasinan yang luas, lebih suka bersembunyi di bawah balak atau objek lain. Mungkin berkumpul dalam agregasi pemakanan.</p><p><strong class="text-[var(--text-primary)]">Diet dan Tabiat Pemakanan:</strong> Pemangsa oportunistik. Juvenil memakan krustasea, dewasa hampir sepenuhnya memakan ikan. Mereka makan dengan menghisap dan menelan mangsa secara keseluruhan.</p>`
                    },
                    baits: {
                        en: ["Cut Fish", "Live Shrimp", "Lures mimicking small fish"],
                        zh: ["切块鱼肉", "活虾", "模仿小鱼的拟饵"],
                        ml: ["Potongan Ikan", "Udang Hidup", "Umpan tiruan ikan kecil"]
                    }
                },
                snapper: {
                    imageUrl: "https://raw.githubusercontent.com/luoxisg/fishing/main/image/Snapper.jpg",
                    chartData: { diet: 4, fight: 3, habitat: 1 },
                    name: { en: "Snapper", zh: "笛鲷 (Snapper)", ml: "Kakap Merah" },
                    description: {
                        en: "Demersal predatory fish with a broad diet, an important cultured fish in Malaysia.",
                        zh: "底栖捕食性鱼类，食谱广泛，是马来西亚重要的养殖鱼类。",
                        ml: "Ikan pemangsa demersal dengan diet yang luas, ikan ternakan penting di Malaysia."
                    },
                    details: {
                        en: `<p><strong class="text-[var(--text-primary)]">Scientific Classification:</strong> Family Lutjanidae. Common species include John's Snapper and Mangrove Red Snapper.</p><p><strong class="text-[var(--text-primary)]">Habitat and Behavior:</strong> Juveniles live in estuaries, adults prefer coral reefs and rocky areas but also forage in sandy areas.</p><p><strong class="text-[var(--text-primary)]">Diet and Feeding Habits:</strong> Demersal predators, mainly feeding on crabs, shrimp, fish, and other invertebrates.</p>`,
                        zh: `<p><strong class="text-[var(--text-primary)]">科学分类：</strong> 笛鲷科。常见种类包括约翰氏笛鲷和红树林红笛鲷。</p><p><strong class="text-[var(--text-primary)]">栖息地与行为：</strong> 幼鱼生活在河口，成鱼偏爱珊瑚礁和岩石区，但也会到沙质区域觅食。</p><p><strong class="text-[var(--text-primary)]">食性与摄食习惯：</strong> 底栖捕食者，主要以螃蟹、虾、鱼类和其他无脊椎动物为食。</p>`,
                        ml: `<p><strong class="text-[var(--text-primary)]">Klasifikasi Saintifik:</strong> Famili Lutjanidae. Spesies biasa termasuk Kakap Merah John dan Kakap Merah Bakau.</p><p><strong class="text-[var(--text-primary)]">Habitat dan Tingkah Laku:</strong> Juvenil hidup di muara, dewasa lebih suka terumbu karang dan kawasan berbatu tetapi juga mencari makan di kawasan berpasir. </p><p><strong class="text-[var(--text-primary)]">Diet dan Tabiat Pemakanan:</strong> Pemangsa demersal, terutamanya memakan ketam, udang, ikan, dan invertebrata motil lain.</p>`
                    },
                    baits: {
                        en: ["Shrimp", "Crabs", "Cut Fish", "Squid"],
                        zh: ["虾", "螃蟹", "切块鱼肉", "鱿鱼"],
                        ml: ["Udang", "Ketam", "Potongan Ikan", "Sotong"]
                    }
                }
            };

            const scienceContent = {
                vision: {
                    content: {
                        en: `<p class="mb-4">Fish eyes are adapted to the underwater environment with rounder lenses, which help them focus correctly in water. However, water absorbs light, especially red and orange light. This means that in deep or murky water, a bright red lure might appear black!</p><p><strong>Application:</strong> In clear, shallow water, realistic colors are effective. But in deep or murky water, <strong>high-contrast</strong> colors (like black and white, bright yellow) or reflective colors (like silver) are more important than specific colors, as they are more easily seen by fish.</p>`,
                        zh: `<p class="mb-4">鱼眼为了适应水下环境，晶状体更圆，这帮助它们在水中正确聚焦。但水会吸收光线，尤其是红色和橙色光。这意味着在深水或浑浊的水中，一个鲜红色的拟饵可能看起来是黑色！</p><p><strong>应用：</strong> 在清澈的浅水，逼真的颜色有效。但在深水或浑浊的水中，<strong>高对比度</strong>的颜色（如黑白、亮黄）或能反光的颜色（如银色）比特定颜色更重要，因为它们更容易被鱼看到。</p>`,
                        ml: `<p class="mb-4">Mata ikan disesuaikan dengan persekitaran bawah air dengan kanta yang lebih bulat, yang membantu mereka fokus dengan betul di dalam air. Walau bagaimanapun, air menyerap cahaya, terutamanya cahaya merah dan oren. Ini bermakna di perairan dalam atau keruh, umpan merah terang mungkin kelihatan hitam!</p><p><strong>Aplikasi:</strong> Di perairan cetek yang jernih, warna realistik berkesan. Tetapi di perairan dalam atau keruh, warna <strong>kontras tinggi</strong> (seperti hitam dan putih, kuning terang) atau warna reflektif (seperti perak) lebih penting daripada warna tertentu, kerana ia lebih mudah dilihat oleh ikan.</p>`
                    }
                },
                chemo: {
                    content: {
                        en: `<p class="mb-4">Fish have extremely sensitive senses of smell and taste, capable of detecting minute quantities of chemicals dissolved in water (like amino acids). Their taste buds are not only in their mouths but also spread across their bodies (especially on catfish barbels)! This means they can "taste" anything they touch.</p><p><strong>Application:</strong> The <strong>scent</strong> of bait is crucial. Natural baits (like chicken liver, cut fish) release strong chemical signals that are highly attractive to fish. This is why "stink baits" designed for catfish are so effective. Some artificial lures are also impregnated with chemical attractants to enhance their appeal.</p>`,
                        zh: `<p class="mb-4">鱼类的嗅觉和味觉极其灵敏，可以探测到溶解在水里极微量的化学物质（如氨基酸）。它们的味蕾不仅在嘴里，甚至遍布全身（特别是鲶鱼的触须上）！这意味着它们能“尝到”任何接触到的东西。</p><p><strong>应用：</strong> 饵料的<strong>气味</strong>至关重要。天然饵料（如鸡肝、鱼块）会释放强烈的化学信号，对鱼有致命的吸引力。这就是为什么为鲶鱼设计的“臭饵”如此有效。一些人工拟饵也会注入化学诱食剂来增强效果。</p>`,
                        ml: `<p class="mb-4">Ikan mempunyai deria bau dan rasa yang sangat sensitif, mampu mengesan kuantiti bahan kimia yang sangat kecil yang larut dalam air (seperti asid amino). Tunas rasa mereka bukan sahaja di mulut tetapi juga tersebar di seluruh badan mereka (terutamanya pada misai ikan keli)! Ini bermakna mereka boleh \"merasa\" apa sahaja yang mereka sentuh.</p><p><strong>Aplikasi:</strong> <strong>Bau</strong> umpan adalah penting. Umpan semula jadi (seperti hati ayam, potongan ikan) mengeluarkan isyarat kimia yang kuat yang sangat menarik kepada ikan. Inilah sebabnya mengapa \"umpan busuk\" yang direka untuk ikan keli sangat berkesan. Sesetengah umpan tiruan juga disuntik dengan penarik kimia untuk meningkatkan daya tarikan mereka.</p>`
                    }
                },
                lateral: {
                    content: {
                        en: `<p class="mb-4">The lateral line system is a series of sensory organs along the sides of a fish's body that detects vibrations and pressure changes in the water. This is the fish's "sixth sense," allowing them to perceive prey, obstacles, or predators even when they cannot see clearly.</p><p><strong>Application:</strong> The <strong>action</strong> of a lure and the <strong>vibrations</strong> it creates in the water are as important as color and scent. Lures that mimic the vibrations of a struggling baitfish or swimming insect can effectively trigger a predatory response, especially in murky water or during night fishing.</p>`,
                        zh: `<p class="mb-4">侧线是鱼身体两侧的一排感觉器官，能探测到水中的振动和压力变化。这是鱼的“第六感”，让它们在看不清的情况下也能感知到猎物、障碍物或捕食者。</p><p><strong>应用：</strong> 拟饵的<strong>动作</strong>和它在水中产生的<strong>振动</strong>，其重要性不亚于颜色和气味。能模仿受伤小鱼挣扎或昆虫游动所产生振动的拟饵，能有效触发鱼的攻击欲望，尤其是在浑水或夜钓时。</p>`,
                        ml: `<p class="mb-4">Sistem garis lateral adalah satu siri organ deria di sepanjang sisi badan ikan yang mengesan getaran dan perubahan tekanan dalam air. Ini adalah \"deria keenam\" ikan, membolehkan mereka mengesan mangsa, halangan, atau pemangsa walaupun mereka tidak dapat melihat dengan jelas.</p><p><strong>Aplikasi:</strong> <strong>Tindakan</strong> umpan dan <strong>getaran</strong> yang dihasilkannya di dalam air adalah sama penting dengan warna dan bau. Umpan yang meniru getaran ikan umpan yang bergelut atau serangga berenang boleh mencetuskan tindak balas pemangsa dengan berkesan, terutamanya di perairan keruh atau semasa memancing malam.</p>`
                    }
                }
            };

            const quizQuestions = [
                {
                    id: 1,
                    question: {
                        en: "Which fish sense is primarily used for detecting vibrations and pressure changes in the water?",
                        zh: "鱼类哪种感官主要用于探测水中的振动和压力变化？",
                        ml: "Deria ikan manakah yang terutamanya digunakan untuk mengesan getaran dan perubahan tekanan dalam air?"
                    },
                    options: {
                        en: ["Vision", "Taste", "Lateral Line", "Smell"],
                        zh: ["视觉", "味觉", "侧线", "嗅觉"],
                        ml: ["Penglihatan", "Rasa", "Garis Lateral", "Bau"]
                    },
                    correctAnswer: 2 // Index of Lateral Line
                },
                {
                    id: 2,
                    question: {
                        en: "Which type of bait would generally be most effective for a highly carnivorous fish like a Catfish, based on its strong sense of smell?",
                        zh: "根据鲶鱼敏锐的嗅觉，哪种饵料通常对其最有效？",
                        ml: "Berdasarkan deria bau yang kuat ikan Keli, umpan jenis manakah yang secara amnya paling berkesan untuk ikan karnivor seperti ikan Keli?"
                    },
                    options: {
                        en: ["Fruits", "Dough Balls", "Chicken Liver", "Algae"],
                        zh: ["水果", "面团球", "鸡肝", "藻类"],
                        ml: ["Buah-buahan", "Bola Doh", "Hati Ayam", "Alga"]
                    },
                    correctAnswer: 2 // Index of Chicken Liver
                },
                {
                    id: 3,
                    question: {
                        en: "When practicing 'Catch & Release', what is the maximum recommended time a fish should be kept out of water?",
                        zh: "在实践“钓后放流”时，建议鱼离开水面的最长时间是多少？",
                        ml: "Apabila mengamalkan 'Tangkap & Lepas', apakah masa maksimum yang disyorkan untuk ikan berada di luar air?"
                    },
                    options: {
                        en: ["30 seconds", "1 minute", "10 seconds", "As long as needed for a photo"],
                        zh: ["30秒", "1分钟", "10秒", "拍照需要多长时间就多久"],
                        ml: ["30 saat", "1 minit", "10 saat", "Selagi diperlukan untuk bergambar"]
                    },
                    correctAnswer: 2 // Index of 10 seconds
                },
                {
                    id: 4,
                    question: {
                        en: "Which fish is primarily herbivorous and often considered an invasive species in many parts of the world?",
                        zh: "哪种鱼类主要是草食性，在世界许多地方常被视为入侵物种？",
                        ml: "Ikan manakah yang terutamanya herbivor dan sering dianggap sebagai spesies invasif di banyak bahagian dunia?"
                    },
                    options: {
                        en: ["Barramundi", "Tilapia", "Snapper", "Catfish"],
                        zh: ["尖吻鲈", "罗非鱼", "笛鲷", "鲶鱼"],
                        ml: ["Siakap", "Tilapia", "Kakap Merah", "Ikan Keli"]
                    },
                    correctAnswer: 1 // Index of Tilapia
                }
            ];

            const sections = document.querySelectorAll('.content-section');
            const navLinks = document.querySelectorAll('.nav-link'); // Desktop nav links
            const bottomNavItems = document.querySelectorAll('.bottom-nav-item'); // Mobile bottom nav items
            const languageSwitcherButtonsDesktop = document.querySelectorAll('#language-switcher-desktop .lang-button');
            const languageSwitcherButtonsMobile = document.querySelectorAll('#language-switcher-mobile .lang-button');

            let fishChart; // Declare chart variable globally

            // Define a set of vibrant colors for the chart datasets
            const chartDatasetColors = [
                { background: 'rgba(54, 162, 235, 0.4)', border: 'rgb(54, 162, 235)' },  // Blue
                { background: 'rgba(255, 99, 132, 0.4)', border: 'rgb(255, 99, 132)' },   // Red
                { background: 'rgba(75, 192, 192, 0.4)', border: 'rgb(75, 192, 192)' },   // Green
                { background: 'rgba(255, 206, 86, 0.4)', border: 'rgb(255, 206, 86)' },  // Yellow
                { background: 'rgba(153, 102, 255, 0.4)', border: 'rgb(153, 102, 255)' } // Purple
            ];

            function updateContent(hash) {
                hash = hash || '#home';

                sections.forEach(section => {
                    section.classList.toggle('hidden', '#' + section.id !== hash);
                });

                navLinks.forEach(link => {
                    link.classList.toggle('active', link.getAttribute('href') === hash);
                });

                bottomNavItems.forEach(item => {
                    item.classList.toggle('active', '#' + item.dataset.navSection === hash);
                });
            }

            function updateLanguage(lang) {
                currentLanguage = lang;
                document.documentElement.lang = lang;

                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.getAttribute('data-lang-key');
                    if (translations[lang] && translations[lang][key]) {
                        // For nav items, only update the span if it exists
                        const span = element.querySelector('span');
                        if (span && (element.classList.contains('bottom-nav-item') || element.classList.contains('nav-link'))) {
                             span.textContent = translations[lang][key];
                        } else {
                            element.innerHTML = translations[lang][key];
                        }
                    }
                });

                renderFishGallery();
                updateScienceContent();
                renderBaitRecommender();
                updateChart();
                renderQuiz();

                [...languageSwitcherButtonsDesktop, ...languageSwitcherButtonsMobile].forEach(button => {
                    button.classList.toggle('active', button.dataset.lang === lang);
                });
            }
            
            function initFishChart() {
                const ctx = document.getElementById('fish-chart').getContext('2d');
                const data = {
                    labels: [], // Will be populated by updateLanguage
                    datasets: Object.keys(fishData).map((key, index) => {
                        const fish = fishData[key];
                        const color = chartDatasetColors[index % chartDatasetColors.length];
                        return {
                            label: fish.name[currentLanguage],
                            data: Object.values(fish.chartData),
                            fill: true,
                            backgroundColor: color.background,
                            borderColor: color.border,
                            pointBackgroundColor: color.border,
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: color.border,
                            pointRadius: 4,
                            pointHoverRadius: 7
                        };
                    })
                };

                const options = {
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(0, 0, 0, 0.15)' },
                            grid: { color: 'rgba(0, 0, 0, 0.1)' },
                            pointLabels: {
                                color: 'var(--text-primary-dark)',
                                font: { size: 14, weight: '600', family: 'Inter' }
                            },
                            ticks: {
                                beginAtZero: false,
                                min: 0,
                                max: 5,
                                stepSize: 1,
                                backdropColor: 'transparent',
                                color: 'rgba(0, 0, 0, 0.6)',
                                font: { size: 10, family: 'Inter' },
                                callback: function(value, index, ticks) {
                                    if (value === 1) return translations[currentLanguage].scale.low.toUpperCase();
                                    if (value === 3) return translations[currentLanguage].scale.mid.toUpperCase();
                                    if (value === 5) return translations[currentLanguage].scale.high.toUpperCase();
                                    return ''; // Hide other labels (0, 2, 4)
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: 'var(--text-primary-dark)',
                                font: { size: 12, family: 'Inter' }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(255,255,255,0.9)',
                            titleColor: 'var(--text-primary-dark)',
                            bodyColor: 'var(--text-secondary-dark)',
                            borderColor: 'var(--border-color-light)',
                            borderWidth: 1,
                            padding: 10,
                            callbacks: {
                                label: function(context) {
                                    const dataIndex = context.dataIndex;
                                    const rawValue = context.raw;
                                    const axisLabel = context.chart.data.labels[dataIndex];
                                    let valueLabel = '';
                                    if (dataIndex === 0) valueLabel = translations[currentLanguage].chartValues.diet[rawValue];
                                    else if (dataIndex === 1) valueLabel = translations[currentLanguage].chartValues.fight[rawValue];
                                    else if (dataIndex === 2) valueLabel = translations[currentLanguage].chartValues.habitat[rawValue];
                                    return `${axisLabel}: ${valueLabel}`;
                                }
                            }
                        }
                    }
                };
                
                fishChart = new Chart(ctx, { type: 'radar', data, options });
            }

            function updateChart() {
                if (!fishChart) return;
                const lang = currentLanguage;
                fishChart.data.labels = [
                    translations[lang].chartLabelDiet,
                    translations[lang].chartLabelFight,
                    translations[lang].chartLabelHabitat
                ];
                fishChart.data.datasets.forEach((dataset, index) => {
                    const fishKey = Object.keys(fishData)[index];
                    dataset.label = fishData[fishKey].name[lang];
                });
                
                // Update scale tick labels
                fishChart.options.scales.r.ticks.callback = function(value) {
                    if (value === 1) return translations[lang].scale.low.toUpperCase();
                    if (value === 3) return translations[lang].scale.mid.toUpperCase();
                    if (value === 5) return translations[lang].scale.high.toUpperCase();
                    return '';
                };

                fishChart.update();
            }

            function renderFishGallery() {
                const gallery = document.getElementById('fish-gallery');
                gallery.innerHTML = '';
                Object.keys(fishData).forEach(key => {
                    const fish = fishData[key];
                    const card = document.createElement('div');
                    card.className = 'card rounded-lg shadow-md overflow-hidden cursor-pointer flex flex-col';
                    card.innerHTML = `
                        <div class="p-6 bg-[var(--bg-main)] text-center">
                            <img src="${fish.imageUrl}" alt="${fish.name[currentLanguage]}" class="w-40 h-40 mx-auto rounded-full object-cover mb-4 border-4 border-[var(--border-color)] transform transition-transform duration-300 hover:scale-105" onerror="this.onerror=null;this.src='https://placehold.co/160x160/1A2A3A/F5F5F5?text=Fish';">
                            <h3 class="text-2xl font-bold mt-4 text-[var(--text-primary)]">${fish.name[currentLanguage]}</h3>
                        </div>
                        <div class="p-6 flex-grow">
                            <p class="text-[var(--text-secondary)]">${fish.description[currentLanguage]}</p>
                        </div>
                    `;
                    card.addEventListener('click', () => openModal(fish));
                    gallery.appendChild(card);
                });
            }
            
            function openModal(fish) {
                const modal = document.getElementById('fish-modal');
                document.getElementById('modal-title').textContent = fish.name[currentLanguage];
                document.getElementById('modal-body').innerHTML = fish.details[currentLanguage];
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            function closeModal() {
                const modal = document.getElementById('fish-modal');
                modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }

            function updateScienceContent() {
                document.querySelectorAll('.science-accordion-item').forEach(item => {
                    const header = item.querySelector('.science-accordion-header');
                    const contentDiv = item.querySelector('.science-accordion-content');
                    const tabId = header.dataset.tab;
                    contentDiv.innerHTML = scienceContent[tabId].content[currentLanguage];
                });
            }

            function renderBaitRecommender() {
                const fishSelector = document.getElementById('fish-selector');
                const originalValue = fishSelector.value;
                fishSelector.innerHTML = `<option value="">${translations[currentLanguage].selectFishPrompt}</option>`;
                Object.keys(fishData).forEach(key => {
                    const fish = fishData[key];
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = fish.name[currentLanguage];
                    fishSelector.appendChild(option);
                });
                fishSelector.value = originalValue; // Preserve selection
                updateBaitRecommendation(); // Update text based on preserved selection
            }
            
            function updateBaitRecommendation() {
                const fishSelector = document.getElementById('fish-selector');
                const baitRecommendation = document.getElementById('bait-recommendation');
                const selectedFishKey = fishSelector.value;
                const fish = fishData[selectedFishKey];
                if (fish && fish.baits) {
                    baitRecommendation.innerHTML = `<p class="font-bold mb-2 text-[var(--text-primary)]">${translations[currentLanguage].baitRecPrompt}</p><p class="text-[var(--text-primary)]">${fish.baits[currentLanguage].join(' • ')}</p>`;
                } else {
                    baitRecommendation.innerHTML = `<p class="text-[var(--text-secondary)]">${translations[currentLanguage].selectFishPrompt}</p>`;
                }
            }

            function renderQuiz() {
                const quizQuestionsContainer = document.getElementById('quiz-questions');
                quizQuestionsContainer.innerHTML = '';
                document.getElementById('quiz-results').classList.add('hidden');
                quizQuestions.forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'mb-6';
                    questionDiv.innerHTML = `
                        <p class="text-lg font-semibold mb-3 text-[var(--text-primary)]">${index + 1}. ${q.question[currentLanguage]}</p>
                        <div class="space-y-2">
                            ${q.options[currentLanguage].map((option, optIndex) => `
                                <div class="quiz-option" data-question-id="${q.id}" data-option-id="${optIndex}">
                                    <span class="text-[var(--text-primary)]">${option}</span>
                                    <span class="feedback-icon text-xl"></span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    quizQuestionsContainer.appendChild(questionDiv);
                });
                document.querySelectorAll('.quiz-option').forEach(optionDiv => {
                    optionDiv.addEventListener('click', (e) => {
                        const questionId = parseInt(e.currentTarget.dataset.questionId);
                        document.querySelectorAll(`.quiz-option[data-question-id="${questionId}"]`).forEach(sibling => {
                            sibling.classList.remove('selected');
                        });
                        e.currentTarget.classList.add('selected');
                    });
                });
            }

            function submitQuiz() {
                let score = 0;
                let allAnswered = true;
                const quizResultsDiv = document.getElementById('quiz-results');
                
                quizQuestions.forEach((q) => {
                    const selectedOption = document.querySelector(`.quiz-option[data-question-id="${q.id}"].selected`);
                    if (!selectedOption) {
                        allAnswered = false;
                        return;
                    }
                    
                    document.querySelectorAll(`.quiz-option[data-question-id="${q.id}"]`).forEach(opt => {
                        opt.classList.remove('correct', 'incorrect');
                        const icon = opt.querySelector('.feedback-icon');
                        if (icon) icon.textContent = '';
                    });

                    const selectedOptionId = parseInt(selectedOption.dataset.optionId);
                    const isCorrect = (selectedOptionId === q.correctAnswer);
                    
                    if (isCorrect) {
                        score++;
                        selectedOption.classList.add('correct');
                        selectedOption.querySelector('.feedback-icon').textContent = '✔';
                    } else {
                        selectedOption.classList.add('incorrect');
                        selectedOption.querySelector('.feedback-icon').textContent = '✖';
                        const correctAnswerOption = document.querySelector(`.quiz-option[data-question-id="${q.id}"][data-option-id="${q.correctAnswer}"]`);
                        if (correctAnswerOption) {
                            correctAnswerOption.classList.add('correct');
                            correctAnswerOption.querySelector('.feedback-icon').textContent = '✔';
                        }
                    }
                });

                quizResultsDiv.classList.remove('hidden');
                if (!allAnswered) {
                    quizResultsDiv.innerHTML = `<p class="text-red-500">${translations[currentLanguage].answerAllQuestions}</p>`;
                    return;
                }
                quizResultsDiv.innerHTML = `<p class="text-[var(--text-primary)]">${translations[currentLanguage].yourScore} ${score} / ${quizQuestions.length}</p>`;
            }

            // --- Ripple Effect for Mobile (Simulating Fishing) ---
            function createRipple(event) {
                // Only run on mobile viewports
                if (!window.matchMedia("(max-width: 767px)").matches) return;

                // Define tags that should not trigger the ripple
                const nonRippleTags = ['BUTTON', 'A', 'INPUT', 'SELECT', 'LABEL', 'CANVAS', 'svg', 'path'];

                let targetElement = event.target;
                // Check if the tapped element or any of its parents are non-ripple elements or have specific interactive classes
                while (targetElement && targetElement !== document.body) {
                    if (nonRippleTags.includes(targetElement.tagName.toUpperCase()) ||
                        targetElement.classList.contains('quiz-option') ||
                        targetElement.classList.contains('accordion-header') ||
                        targetElement.classList.contains('science-accordion-header') ||
                        targetElement.classList.contains('modal-content') ||
                        targetElement.hasAttribute('data-nav-section')
                       ) {
                        return; // Exit if it's an interactive element
                    }
                    targetElement = targetElement.parentElement;
                }

                const ripple = document.createElement("span");
                ripple.classList.add("ripple");

                // Get touch coordinates relative to the document
                const x = event.touches[0].pageX;
                const y = event.touches[0].pageY;
                const size = 100; // Ripple size in pixels

                // Position the ripple centered on the touch point
                ripple.style.width = ripple.style.height = `${size}px`;
                ripple.style.left = `${x - size / 2}px`;
                ripple.style.top = `${y - size / 2}px`;

                document.body.appendChild(ripple);

                // Clean up the ripple element after the animation finishes
                setTimeout(() => {
                    ripple.remove();
                }, 800); // Must match the animation duration in CSS
            }

            // --- Event Listeners ---
            window.addEventListener('hashchange', () => updateContent(window.location.hash));
            [...navLinks, ...bottomNavItems].forEach(link => {
                link.addEventListener('click', (e) => {
                    const hash = e.currentTarget.getAttribute('href');
                    updateContent(hash);
                });
            });
            [...languageSwitcherButtonsDesktop, ...languageSwitcherButtonsMobile].forEach(button => {
                button.addEventListener('click', (e) => {
                    const lang = e.target.dataset.lang;
                    updateLanguage(lang);
                    localStorage.setItem('language', lang);
                });
            });
            document.getElementById('close-modal').addEventListener('click', closeModal);
            document.getElementById('fish-modal').addEventListener('click', (e) => {
                if (e.target === e.currentTarget) closeModal();
            });
            document.querySelectorAll('.science-accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const isActive = header.classList.contains('active');
                    document.querySelectorAll('.science-accordion-header.active').forEach(activeHeader => {
                        activeHeader.classList.remove('active');
                        activeHeader.nextElementSibling.classList.remove('expanded');
                        activeHeader.nextElementSibling.style.maxHeight = null;
                    });
                    if (!isActive) {
                        header.classList.add('active');
                        content.classList.add('expanded');
                        content.style.maxHeight = content.scrollHeight + 'px';
                    }
                });
            });
            document.getElementById('fish-selector').addEventListener('change', updateBaitRecommendation);
            document.querySelectorAll('.accordion-item .accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('span:last-child');
                    content.classList.toggle('expanded');
                    icon.style.transform = content.classList.contains('expanded') ? 'rotate(45deg)' : 'rotate(0deg)';
                });
            });
            document.getElementById('submit-quiz').addEventListener('click', submitQuiz);
            // Attach the event listener to the body for the ripple effect
            document.body.addEventListener('touchstart', createRipple, { passive: true });


            // --- Initial Load ---
            initFishChart();
            const initialLang = localStorage.getItem('language') || 'zh'; // Default to Chinese
            updateLanguage(initialLang);
            updateContent(window.location.hash || '#home');

        })(); // End of IIFE
    </script>
</body>
</html>
